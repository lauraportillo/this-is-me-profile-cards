"use strict";const inputsTextConfig=[{inputClass:".js-name",cardClass:".js-namePreview",defaultValue:"Nombre Apellido",cardPrefix:"",cardElementAttribute:"innerHTML"},{inputClass:".js-position",cardClass:".js-positionPreview",defaultValue:"Front-end developer",cardPrefix:"",cardElementAttribute:"innerHTML"},{inputClass:".js-email",cardClass:".js-emailPreview",defaultValue:"",cardPrefix:"mailto:",cardElementAttribute:"href"},{inputClass:".js-phone",cardClass:".js-phonePreview",defaultValue:"",cardPrefix:"tel:",cardElementAttribute:"href"},{inputClass:".js-linkedin",cardClass:".js-linkedinPreview",defaultValue:"",cardPrefix:"https://www.linkedin.com/in/",cardElementAttribute:"href"},{inputClass:".js-github",cardClass:".js-githubPreview",defaultValue:"",cardPrefix:"https://github.com/",cardElementAttribute:"href"}];function updateAllInputs(){for(const e of inputsTextConfig){const t=document.querySelector(e.inputClass),l=document.querySelector(e.cardClass);let n=t.value;"innerHTML"===e.cardElementAttribute?(n=""===t.value?e.defaultValue:t.value,l.innerHTML=n):"href"===e.cardElementAttribute&&(""===t.value?n="#":(n=n.replace(e.cardPrefix,""),n=e.cardPrefix+n),l.href=n)}saveInLocalStorage()}const inputTextElements=document.querySelectorAll(".js-inputText");for(const e of inputTextElements)e.addEventListener("keyup",updateAllInputs);const collapsable1=document.querySelector(".js-slide1"),collapsable2=document.querySelector(".js-slide2"),collapsable3=document.querySelector(".js-slide3"),designElement=document.querySelector(".js-design"),fillElement=document.querySelector(".js-fill"),shareElement=document.querySelector(".js-share");function handleShow1(){collapsable1.classList.toggle("collapsable--close")}function handleShow2(){collapsable2.classList.toggle("collapsable--open")}function handleShow3(){collapsable3.classList.toggle("collapsable--open")}designElement.addEventListener("click",handleShow1),fillElement.addEventListener("click",handleShow2),shareElement.addEventListener("click",handleShow3);const paletteElements=document.querySelectorAll(".js-palette"),cardElement=document.querySelector(".js-card");let checkedPalette=1;function updatePalette(){cardElement.classList.remove("palette1","palette2","palette3","palette4");const e=document.querySelector(".js-palette:checked");checkedPalette=e.value,cardElement.classList.add("palette"+checkedPalette),saveInLocalStorage()}for(const e of paletteElements)e.addEventListener("change",updatePalette);const fr=new FileReader,uploadBtn=document.querySelector(".js-profileTrigger"),fileField=document.querySelector(".js-profileUploadBtn"),profileImage=document.querySelector(".js-profileImage"),profilePreview=document.querySelector(".js-profilePreview");let photo="";function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){photo=fr.result,updatePhoto(),saveInLocalStorage()}const defaultPhoto=document.querySelector(".sample__photo");function updatePhoto(){const e=photo||"url("+defaultPhoto.style.backgroundImage;profilePreview.style.backgroundImage=`url(${e})`,profileImage.style.backgroundImage=`url(${e})`}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const resetButtonElement=document.querySelector(".js-reset");function resetInfo(){localStorage.clear()}function getUserData(){return{photo:photo,palette:parseInt(document.querySelector(".js-palette:checked").value),name:document.querySelector(".js-inputName").value,job:document.querySelector(".js-inputJob").value,email:document.querySelector(".js-inputEmail").value,phone:document.querySelector(".js-inputPhone").value,linkedin:document.querySelector(".js-inputLinkedin").value,github:document.querySelector(".js-inputGithub").value}}function saveInLocalStorage(){const e=getUserData(),t=JSON.stringify(e);localStorage.setItem("userData",t)}function getFromLocalStorage(){const e=localStorage.getItem("userData");if(null!==e){const t=JSON.parse(e);document.querySelector(".js-inputName").value=t.name,document.querySelector(".js-inputJob").value=t.job,document.querySelector(".js-inputEmail").value=t.email,document.querySelector(".js-inputPhone").value=t.phone,document.querySelector(".js-inputLinkedin").value=t.linkedin,document.querySelector(".js-inputGithub").value=t.github,photo=t.photo;const l=document.querySelectorAll(".js-palette");for(const e of l)e.value===t.palette&&(e.checked=!0);updateAllInputs(),updatePalette(),updatePhoto()}}resetButtonElement.addEventListener("click",resetInfo);const form=document.querySelector(".js-form");function handleSubmit(e){e.preventDefault()}function handle13Keydown(e){if(13==event.which)return e.preventDefault(),!1}form.addEventListener("submit",handleSubmit),form.addEventListener("keydown",handle13Keydown);const createBtn=document.querySelector(".js-create-btn"),cardResultElement=document.querySelector(".js-card-result"),createdSection=document.querySelector(".js-created"),errorElement=document.querySelector(".js-consoleError"),errorSection=document.querySelector(".js-error");function handleCreateBtn(e){e.preventDefault();const t=getUserData();fetch("https://profileawesome.herokuapp.com/card",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{!0===e.success?(cardResultElement.innerHTML=e.cardURL,cardResultElement.href=e.cardURL,createdSection.classList.remove("created--hidden"),errorSection.classList.add("created--hidden")):(errorElement.innerHTML=e.error,errorSection.classList.remove("created--hidden"),createdSection.classList.add("created--hidden"))})}createBtn.addEventListener("click",handleCreateBtn),getFromLocalStorage(),updateAllInputs(),updatePalette(),updatePhoto();